<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>4. gridData.core — Core functionality for storing n-D grids &mdash; gridDataFormats 0.3.1-dev documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.3.1-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="gridDataFormats 0.3.1-dev documentation" href="../index.html" />
    <link rel="prev" title="3.2.3. CCP4 — the CCP4 volumetric data format" href="formats/CCP4.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="formats/CCP4.html" title="3.2.3. CCP4 — the CCP4 volumetric data format"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">gridDataFormats 0.3.1-dev documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">4. <code class="docutils literal"><span class="pre">gridData.core</span></code> &#8212; Core functionality for storing n-D grids</a><ul>
<li><a class="reference internal" href="#classes-and-functions">4.1. Classes and functions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="formats/CCP4.html"
                        title="previous chapter">3.2.3. <code class="docutils literal"><span class="pre">CCP4</span></code> &#8212; the CCP4 volumetric data format</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/gridData/core.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="module-gridData.core"></span><div class="section" id="griddata-core-core-functionality-for-storing-n-d-grids">
<h1>4. <a class="reference internal" href="#module-gridData.core" title="gridData.core"><code class="xref py py-mod docutils literal"><span class="pre">gridData.core</span></code></a> &#8212; Core functionality for storing n-D grids<a class="headerlink" href="#griddata-core-core-functionality-for-storing-n-d-grids" title="Permalink to this headline">¶</a></h1>
<p>The <code class="xref py py-mod docutils literal"><span class="pre">core</span></code> module contains classes and functions that are
independent of the grid data format. In particular this module
contains the <a class="reference internal" href="#gridData.core.Grid" title="gridData.core.Grid"><code class="xref py py-class docutils literal"><span class="pre">Grid</span></code></a> class that acts as a universal constructor
for specific formats:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">g</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>           <span class="c"># construct</span>
<span class="n">g</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">format</span><span class="p">)</span>   <span class="c"># export to the desired format</span>
</pre></div>
</div>
<p>Some formats can also be read:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">g</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">()</span>                   <span class="c"># make an empty Grid</span>
<span class="n">g</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>             <span class="c"># populate with data from filename</span>
</pre></div>
</div>
<div class="section" id="classes-and-functions">
<h2>4.1. Classes and functions<a class="headerlink" href="#classes-and-functions" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="gridData.core.Grid">
<em class="property">class </em><code class="descclassname">gridData.core.</code><code class="descname">Grid</code><span class="sig-paren">(</span><em>grid=None</em>, <em>edges=None</em>, <em>origin=None</em>, <em>delta=None</em>, <em>metadata={}</em>, <em>interpolation_spline_order=3</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gridData/core.html#Grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridData.core.Grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to manage a multidimensional grid object.</p>
<p>The export(format=&#8217;dx&#8217;) method always exports a 3D object, the
rest should work for an array of any dimension.</p>
<p>The grid (Grid.grid) can be manipulated as a standard numpy
array.</p>
<p>The attribute Grid.metadata holds a user-defined dictionary that
can be used to annotate the data. It is saved with save().</p>
<dl class="method">
<dt id="gridData.core.Grid.centers">
<code class="descname">centers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gridData/core.html#Grid.centers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridData.core.Grid.centers" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the coordinates of the centers of all grid cells as an
iterator.</p>
</dd></dl>

<dl class="method">
<dt id="gridData.core.Grid.check_compatible">
<code class="descname">check_compatible</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gridData/core.html#Grid.check_compatible"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridData.core.Grid.check_compatible" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if <em>other</em> can be used in an arithmetic operation.</p>
<ol class="arabic simple">
<li><em>other</em> is a scalar</li>
<li><em>other</em> is a grid defined on the same edges</li>
</ol>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">TypeError</span></code> if not compatible.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridData.core.Grid.export">
<code class="descname">export</code><span class="sig-paren">(</span><em>filename</em>, <em>file_format=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gridData/core.html#Grid.export"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridData.core.Grid.export" title="Permalink to this definition">¶</a></dt>
<dd><p>export density to file using the given format.</p>
<p>The format can also be deduced from the suffix of the filename
though the <em>format</em> keyword takes precedence.</p>
<p>The default format for export() is &#8216;dx&#8217;.  Use &#8216;dx&#8217; for
visualization.</p>
<p>Implemented formats:</p>
<dl class="docutils">
<dt>dx</dt>
<dd><code class="xref py py-mod docutils literal"><span class="pre">OpenDX</span></code></dd>
<dt>pickle</dt>
<dd>pickle (use :meth:<code class="docutils literal"><span class="pre">Grid.load`</span> <span class="pre">to</span> <span class="pre">restore);</span> <span class="pre">:meth:`Grid.save`</span>
<span class="pre">is</span> <span class="pre">simpler</span> <span class="pre">than</span> <span class="pre">``export(format='python')</span></code>.</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gridData.core.Grid.interpolated">
<code class="descname">interpolated</code><a class="headerlink" href="#gridData.core.Grid.interpolated" title="Permalink to this definition">¶</a></dt>
<dd><p>B-spline function over the data grid(x,y,z).</p>
<blockquote>
<div>interpolated([x1,x2,...],[y1,y2,...],[z1,z2,...]) -&gt; F[x1,y1,z1],F[x2,y2,z2],...</div></blockquote>
<p>The interpolation order is set in <code class="xref py py-attr docutils literal"><span class="pre">Grid.interpolation_spline_order</span></code>.</p>
<p>The interpolated function is computed once and is cached for better
performance. Whenever <code class="xref py py-attr docutils literal"><span class="pre">interpolation_spline_order</span></code> is
modified, <a class="reference internal" href="#gridData.core.Grid.interpolated" title="gridData.core.Grid.interpolated"><code class="xref py py-meth docutils literal"><span class="pre">Grid.interpolated()</span></code></a> is recomputed.</p>
<p>The value for unknown data is set in <code class="xref py py-attr docutils literal"><span class="pre">Grid.interpolation_cval</span></code>
(TODO: also recompute when interpolation_cval value is changed.)</p>
<dl class="docutils">
<dt>Example usage for resampling::</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">XX</span><span class="p">,</span><span class="n">YY</span><span class="p">,</span><span class="n">ZZ</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="mi">40</span><span class="p">:</span><span class="mi">75</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">96</span><span class="p">:</span><span class="mi">150</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">20</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mf">0.5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FF</span> <span class="o">=</span> <span class="n">interpolated</span><span class="p">(</span><span class="n">XX</span><span class="p">,</span><span class="n">YY</span><span class="p">,</span><span class="n">ZZ</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gridData.core.Grid.load">
<code class="descname">load</code><span class="sig-paren">(</span><em>filename</em>, <em>file_format=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gridData/core.html#Grid.load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridData.core.Grid.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load saved (pickled or dx) grid and edges from &lt;filename&gt;.pickle</p>
<blockquote>
<div>Grid.load(&lt;filename&gt;.pickle)
Grid.load(&lt;filename&gt;.dx)</div></blockquote>
<p>The load() method calls the class&#8217;s constructor method and
completely resets all values, based on the loaded data.</p>
</dd></dl>

<dl class="method">
<dt id="gridData.core.Grid.resample">
<code class="descname">resample</code><span class="sig-paren">(</span><em>edges</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gridData/core.html#Grid.resample"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridData.core.Grid.resample" title="Permalink to this definition">¶</a></dt>
<dd><p>Resample data to a new grid with edges <em>edges</em>.</p>
<blockquote>
<div>resample(edges) &#8211;&gt; Grid</div></blockquote>
<p>or</p>
<blockquote>
<div>resample(otherGrid) &#8211;&gt; Grid</div></blockquote>
<p>The order of the interpolation is set by
<code class="xref py py-attr docutils literal"><span class="pre">Grid.interpolation_spline_order</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="gridData.core.Grid.resample_factor">
<code class="descname">resample_factor</code><span class="sig-paren">(</span><em>factor</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gridData/core.html#Grid.resample_factor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridData.core.Grid.resample_factor" title="Permalink to this definition">¶</a></dt>
<dd><p>Resample to a new regular grid with factor*oldN cells along
each dimension.</p>
</dd></dl>

<dl class="method">
<dt id="gridData.core.Grid.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gridData/core.html#Grid.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridData.core.Grid.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a grid object to &lt;filename&gt;.pickle</p>
<blockquote>
<div>Grid.save(filename)</div></blockquote>
<p>Internally, this calls Grid.export(filename,format=&#8221;python&#8221;). A grid can be
regenerated from the saved data with</p>
<blockquote>
<div>g = Grid(filename=&lt;filename&gt;)</div></blockquote>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="gridData.core.ndmeshgrid">
<code class="descclassname">gridData.core.</code><code class="descname">ndmeshgrid</code><span class="sig-paren">(</span><em>*arrs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gridData/core.html#ndmeshgrid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridData.core.ndmeshgrid" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a mesh grid for N dimensions.</p>
<p>The input are N arrays, each of which contains the values along one axis of
the coordinate system. The arrays do not have to have the same number of
entries. The function returns arrays that can be fed into numpy functions
so that they produce values for <em>all</em> points spanned by the axes <em>arrs</em>.</p>
<p>Original from
<a class="reference external" href="http://stackoverflow.com/questions/1827489/numpy-meshgrid-in-3d">http://stackoverflow.com/questions/1827489/numpy-meshgrid-in-3d</a> and fixed.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="formats/CCP4.html" title="3.2.3. CCP4 — the CCP4 volumetric data format"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">gridDataFormats 0.3.1-dev documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2007-2015, Oliver Beckstein, Jan Domanski, Max Linke, Jesse Johnson.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>